<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <title>Marvelous Gaming</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">


    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="assets/css/fontawesome.css">
    <link rel="stylesheet" href="assets/css/templatemo-lugx-gaming.css">
    <link rel="stylesheet" href="assets/css/owl.css">
    <link rel="stylesheet" href="assets/css/animate.css">
    <link rel="stylesheet" href="assets/css/carrito.css">
    <link rel="stylesheet" href="./assets/Backend/mp.js">    <link rel="stylesheet"href="https://unpkg.com/swiper@7/swiper-bundle.min.css"/>
<!--
<-- Agregar Escalado de Rojo: De Mas oscuro a mas Claro.
    Lo naranja a Negro y Fuente Blanca. 

    El home que aparezcan las expansiones y a partir de ahi que se muestren las cartas de las expanciones.

    Footer: Marcar todas las expansiones.



-->
  </head>

<body>

  <!-- ***** Preloader Start ***** -->
  <div id="js-preloader" class="js-preloader">
    <div class="preloader-inner">
      <span class="dot"></span>
      <div class="dots">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>
  <!-- ***** Preloader End ***** -->

  <!-- ***** Header Area Start ***** -->
  <header class="header-area header-sticky">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <nav class="main-nav">
                    <!-- ***** Logo Start ***** -->
                    <a href="index.html" class="logo">
                        <img src="assets/images/logo.png" alt="" style="width: 158px;">
                    </a>
                    <!-- ***** Logo End ***** -->
                    <!-- ***** Menu Start ***** -->
                    <ul class="nav">
                      <li><a href="index.html" class="active">Inicio</a></li>
                      <li><a href="shop.html">Expansiones</a></li>
                      <li><a href="contact.html">Juegos</a></li>
                      <li><a href="product-details.html">Sobre nosotros</a></li>
                      <li><a href="contact.html">Cotacto</a></li>
                  </ul>   
               
                    <!-- ***** Menu End ***** -->
                </nav>
            </div>
        </div>
    </div>
  </header>
  <!-- ***** Header Area End ***** -->

  <div class="main-banner">
    <div class="container">
      <div class="row">
        <div class="col-lg-6 align-self-center">
          <div class="caption header-text">
            <h6>Somos</h6>
            <h2>Marvelous Gaming</h2>
            <p>LUGX Gaming is free Bootstrap 5 HTML CSS website template for your gaming websites. You can download and use this layout for commercial purposes. Please tell your friends about TemplateMo.</p>
                </div>
        </div>
        <div class="col-lg-4 offset-lg-2">
          <div class="right-image">
            <img src="assets/images/banner-image.jpg" alt="">
            <span class="price">$22</span>
            <span class="offer">-40%</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="features">
    <div class="container">
      <div class="row">
        <div class="col-lg-3 col-md-6">
          <a href="#">
            <div class="item">
              <div class="image">
                <img src="assets/images/featured-01.png" alt="" style="max-width: 44px;">
              </div>
              <h4>Expansión 1</h4>
            </div>
          </a>
        </div>
        <div class="col-lg-3 col-md-6">
          <a href="#">
            <div class="item">
              <div class="image">
                <img src="assets/images/featured-02.png" alt="" style="max-width: 44px;">
              </div>
              <h4>Expansión 2</h4>
            </div>
          </a>
        </div>
        <div class="col-lg-3 col-md-6">
          <a href="#">
            <div class="item">
              <div class="image">
                <img src="assets/images/featured-03.png" alt="" style="max-width: 44px;">
              </div>
              <h4>Expansión 3</h4>
            </div>
          </a>
        </div>
        <div class="col-lg-3 col-md-6">
          <a href="#">
            <div class="item">
              <div class="image">
                <img src="assets/images/featured-04.png" alt="" style="max-width: 44px;">
              </div>
              <h4>Expansión 4</h4>
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>

  <div class="section trending">
    <div class="container">
      <div class="row">
        <div class="col-lg-6">
          <div class="section-heading">
            <h6>Ofertas en Tendencia</h6>
            <h2>Cartas Pokemon en Ofertas</h2>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="main-button">
            <a href="shop.html">Ver Todo</a>
          </div>
        </div>
        <div class="col-lg-3 col-md-6">
          <div class="item">
              <div class="thumb">
                  <img src="assets/images/trending-01.jpg" alt="">
                  <span class="price"> <em>$28</em>$20</span>
              </div>
              <div class="down-content">
                  <span class="category">Action</span>
                  <h4>Assasin Creed</h4>
                  <button class="add-to-cart" data-id="1" data-name="Assassin Creed" data-price="20">Agregar al carrito</button>
              </div>
          </div>
      </div> <div class="col-lg-3 col-md-6">
        <div class="item">
            <div class="thumb">
                <img src="assets/images/trending-01.jpg" alt="">
                <span class="price"> <em>$28</em>$20</span>
            </div>
            <div class="down-content">
                <span class="category">Action</span>
                <h4>Assasin Creed</h4>
                <button class="add-to-cart" data-id="1" data-name="Assassin Creed" data-price="20">Agregar al carrito</button>
            </div>
        </div>
    </div> <div class="col-lg-3 col-md-6">
      <div class="item">
          <div class="thumb">
              <img src="assets/images/trending-01.jpg" alt="">
              <span class="price"> <em>$28</em>$20</span>
          </div>
          <div class="down-content">
              <span class="category">Action</span>
              <h4>Assasin Creed</h4>
              <button class="add-to-cart" data-id="1" data-name="Assassin Creed" data-price="20">Agregar al carrito</button>
          </div>
      </div>
  </div> <div class="col-lg-3 col-md-6">
    <div class="item">
        <div class="thumb">
            <img src="assets/images/trending-01.jpg" alt="">
            <span class="price"> <em>$28</em>$20</span>
        </div>
        <div class="down-content">
            <span class="category">Action</span>
            <h4>Assasin Creed</h4>
            <button class="add-to-cart" data-id="1" data-name="Assassin Creed" data-price="20">Agregar al carrito</button>
        </div>
    </div>
</div>
  </div>

 


  <div class="section most-played">
    <div class="container">
      <div class="row">
        <div class="col-lg-6">
          <div class="section-heading">
            <h6>Cartas V-Max</h6>
            <h2>Expansión .....</h2>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="main-button">
            <a href="shop.html">View All</a>
          </div>
        </div>
        <div class="col-lg-2 col-md-6 col-sm-6">
          <div class="item">
            <div class="thumb">
              <a href="product-details.html"><img src="assets/images/top-game-01.jpg" alt=""></a>
            </div>
            <div class="down-content">
                <span class="category">Adventure</span>
                <h4>Assasin Creed</h4>
                <a href="product-details.html">Explore</a>
            </div>
          </div>
        </div>
        <div class="col-lg-2 col-md-6 col-sm-6">
          <div class="item">
            <div class="thumb">
              <a href="product-details.html"><img src="assets/images/top-game-02.jpg" alt=""></a>
            </div>
            <div class="down-content">
                <span class="category">Adventure</span>
                <h4>Assasin Creed</h4>
                <a href="product-details.html">Explore</a>
            </div>
          </div>
        </div>
        <div class="col-lg-2 col-md-6 col-sm-6">
          <div class="item">
            <div class="thumb">
              <a href="product-details.html"><img src="assets/images/top-game-03.jpg" alt=""></a>
            </div>
            <div class="down-content">
                <span class="category">Adventure</span>
                <h4>Assasin Creed</h4>
                <a href="product-details.html">Explore</a>
            </div>
          </div>
        </div>
        <div class="col-lg-2 col-md-6 col-sm-6">
          <div class="item">
            <div class="thumb">
              <a href="product-details.html"><img src="assets/images/top-game-04.jpg" alt=""></a>
            </div>
            <div class="down-content">
                <span class="category">Adventure</span>
                <h4>Assasin Creed</h4>
                <a href="product-details.html">Explore</a>
            </div>
          </div>
        </div>
        <div class="col-lg-2 col-md-6 col-sm-6">
          <div class="item">
            <div class="thumb">
              <a href="product-details.html"><img src="assets/images/top-game-05.jpg" alt=""></a>
            </div>
            <div class="down-content">
                <span class="category">Adventure</span>
                <h4>Assasin Creed</h4>
                <a href="product-details.html">Explore</a>
            </div>
          </div>
        </div>
        <div class="col-lg-2 col-md-6 col-sm-6">
          <div class="item">
            <div class="thumb">
              <a href="product-details.html"><img src="assets/images/top-game-06.jpg" alt=""></a>
            </div>
            <div class="down-content">
                <span class="category">Adventure</span>
                <h4>Assasin Creed</h4>
                <a href="product-details.html">Explore</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="section categories">
    <div class="container">
      <div class="row">
        <div class="col-lg-12 text-center">
          <div class="section-heading">
            <h6>Categories</h6>
            <h2>Top Categories</h2>
          </div>
        </div>
        <div class="col-lg col-sm-6 col-xs-12">
          <div class="item">
            <h4>Action</h4>
            <div class="thumb">
              <a href="product-details.html"><img src="assets/images/categories-01.jpg" alt=""></a>
            </div>
          </div>
        </div>
        <div class="col-lg col-sm-6 col-xs-12">
          <div class="item">
            <h4>Action</h4>
            <div class="thumb">
              <a href="product-details.html"><img src="assets/images/categories-05.jpg" alt=""></a>
            </div>
          </div>
        </div>
        <div class="col-lg col-sm-6 col-xs-12">
          <div class="item">
            <h4>Action</h4>
            <div class="thumb">
              <a href="product-details.html"><img src="assets/images/categories-03.jpg" alt=""></a>
            </div>
          </div>
        </div>
        <div class="col-lg col-sm-6 col-xs-12">
          <div class="item">
            <h4>Action</h4>
            <div class="thumb">
              <a href="product-details.html"><img src="assets/images/categories-04.jpg" alt=""></a>
            </div>
          </div>
        </div>
        <div class="col-lg col-sm-6 col-xs-12">
          <div class="item">
            <h4>Action</h4>
            <div class="thumb">
              <a href="product-details.html"><img src="assets/images/categories-05.jpg" alt=""></a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="section cta">
    <div class="container">
      <div class="row">
        <div class="col-lg-5">
          <div class="shop">
            <div class="row">
              <div class="col-lg-12">
                <div class="section-heading">
                  <h6>Our Shop</h6>
                  <h2>Go Pre-Order Buy & Get Best <em>Prices</em> For You!</h2>
                </div>
                <p>Lorem ipsum dolor consectetur adipiscing, sed do eiusmod tempor incididunt.</p>
                <div class="main-button">
                  <a href="shop.html">Shop Now</a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-5 offset-lg-2 align-self-end">
          <div class="subscribe">
            <div class="row">
              <div class="col-lg-12">
                <div class="section-heading">
                  <h6>NEWSLETTER</h6>
                  <h2>Get Up To $100 Off Just Buy <em>Subscribe</em> Newsletter!</h2>
                </div>
                <div class="search-input">
                  <form id="subscribe" action="#">
                    <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Your email...">
                    <button type="submit">Subscribe Now</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

<!-- Botón flotante del carrito -->
<div id="floating-cart" class="floating-cart">
  <img src="./assets/images/picachu.png" alt="Carrito" class="cart-icon">
  <span id="cart-count" class="cart-count">0</span>
</div>

<div id="cart" class="cart">
  <h4>Carrito de Compras</h4>
  <ul id="cart-items"></ul>
  <p>Total: $<span id="total-price">0.00</span></p>
  <button id="checkout" class="btn btn-primary">Pagar</button>
  <button id="close-cart" class="btn btn-secondary">Cerrar</button>
</div>
  <footer>
    <div class="container">
      <div class="col-lg-12">
        <p>Copyright © 2048 LUGX Gaming Company. All rights reserved. &nbsp;&nbsp; <a rel="nofollow" href="https://templatemo.com" target="_blank">Design: TemplateMo</a></p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
  <script src="assets/js/isotope.min.js"></script>
  <script src="assets/js/owl-carousel.js"></script>
  <script src="assets/js/counter.js"></script>
  <script src="./assets/js/Backend/mp.js"></script>
  <script src="server.js"></script>
  <script src="assets/js/custom.js"></script>

<script>

let cart = [];
let totalPrice = 0;

// Función para mostrar/ocultar el carrito
const toggleCart = () => {
    const cartElement = document.getElementById('cart');
    cartElement.classList.toggle('open'); // Alterna la clase 'open'
    updateCartItems(); // Actualiza los elementos del carrito
};

// Actualiza la lista de productos en el carrito
const updateCartItems = () => {
    const cartItems = document.getElementById('cart-items');
    cartItems.innerHTML = ''; // Limpiar lista previa
    totalPrice = 0; // Reiniciar total

    // Recorrer los productos en el carrito
    cart.forEach((item, index) => {
        const li = document.createElement('li');
        li.innerHTML = `
            <div>
                <strong>${item.name}</strong> - $${item.price.toFixed(2)} x ${item.quantity}
            </div>
            <div>
                <button onclick="increaseQuantity(${index})">+</button>
                <button onclick="decreaseQuantity(${index})">-</button>
                <button onclick="removeItem(${index})">Eliminar</button>
            </div>
        `;
        cartItems.appendChild(li);

        // Calcular el precio total
        totalPrice += item.price * item.quantity;
    });

    // Actualizar el precio total en el DOM
    document.getElementById('total-price').textContent = totalPrice.toFixed(2);
};

// Función para aumentar la cantidad de un producto
const increaseQuantity = (index) => {
    cart[index].quantity++;
    updateCartItems();
    updateCartCount();
};

// Función para disminuir la cantidad de un producto
const decreaseQuantity = (index) => {
    if (cart[index].quantity > 1) {
        cart[index].quantity--;
    } else {
        cart.splice(index, 1); // Eliminar si la cantidad es 0
    }
    updateCartItems();
    updateCartCount();
};

// Función para eliminar un producto del carrito
const removeItem = (index) => {
    cart.splice(index, 1);
    updateCartItems();
    updateCartCount();
};

// Evento de añadir al carrito
document.querySelectorAll('.add-to-cart').forEach(button => {
    button.addEventListener('click', () => {
        const id = button.getAttribute('data-id');
        const name = button.getAttribute('data-name');
        const price = parseFloat(button.getAttribute('data-price'));

        // Verificar si el producto ya está en el carrito
        const existingItem = cart.find(item => item.id === id);
        if (existingItem) {
            existingItem.quantity++;
        } else {
            cart.push({ id, name, price, quantity: 1 });
        }

        // Actualizar el contador y los elementos del carrito
        updateCartCount();
        updateCartItems();
    });
});

// Actualiza el contador del carrito
const updateCartCount = () => {
    document.getElementById('cart-count').textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
};

// Vincula el evento al logo de Pikachu
document.getElementById('floating-cart').addEventListener('click', toggleCart);

// Vincula el evento al botón de cerrar
document.getElementById('close-cart').addEventListener('click', toggleCart);




// Agrega esto dentro de tu tag <script> existente, después de las funciones del carrito

// Función para manejar el checkout con Mercado Pago
document.getElementById('checkout').addEventListener('click', async () => {
    try {
        // Preparar los items para Mercado Pago
        const items = cart.map(item => ({
            title: item.name,
            unit_price: Number(item.price),
            quantity: item.quantity
        }));

        // Enviar la solicitud al servidor
        const response = await fetch('http://localhost:3001/create_preference', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ items })
        });

        const data = await response.json();

        // Redirigir a la página de pago de Mercado Pago
        if (data.id) {
            window.location.href = `https://www.mercadopago.com.ar/checkout/v1/redirect?pref_id=${data.id}`;
        }
    } catch (error) {
        console.error('Error:', error);
        alert('Hubo un error al procesar el pago');
    }
});
// let cart = [];
// let totalPrice = 0;

// // Función para mostrar/ocultar el carrito
// const toggleCart = () => {
//     const cartElement = document.getElementById('cart');
//     cartElement.classList.toggle('open');
//     updateCartItems();
// };

// // Actualiza la lista de productos en el carrito
// const updateCartItems = () => {
//     const cartItems = document.getElementById('cart-items');
//     cartItems.innerHTML = ''; // Limpiar lista previa
//     totalPrice = 0; // Reiniciar total

//     cart.forEach((item, index) => {
//         const li = document.createElement('li');
//         li.innerHTML = `
//             ${item.name} - $${item.price.toFixed(2)} x ${item.quantity}
//             <div>
//                 <button onclick="increaseQuantity(${index})">+</button>
//                 <button onclick="decreaseQuantity(${index})">-</button>
//                 <button onclick="removeItem(${index})">Eliminar</button>
//             </div>
//         `;
//         cartItems.appendChild(li);
//         totalPrice += item.price * item.quantity;
//     });

//     document.getElementById('total-price').textContent = totalPrice.toFixed(2);
// };

// // Funciones para modificar el carrito
// const increaseQuantity = (index) => {
//     cart[index].quantity++;
//     updateCartItems();
// };

// const decreaseQuantity = (index) => {
//     if (cart[index].quantity > 1) {
//         cart[index].quantity--;
//     } else {
//         cart.splice(index, 1); // Eliminar si la cantidad es 0
//     }
//     updateCartItems();
// };

// const removeItem = (index) => {
//     cart.splice(index, 1);
//     updateCartItems();
// };

// // Evento de añadir al carrito
// document.querySelectorAll('.add-to-cart').forEach(button => {
//     button.addEventListener('click', () => {
//         const id = button.getAttribute('data-id');
//         const name = button.getAttribute('data-name');
//         const price = parseFloat(button.getAttribute('data-price'));

//         const existingItem = cart.find(item => item.id === id);
//         if (existingItem) {
//             existingItem.quantity++;
//         } else {
//             cart.push({ id, name, price, quantity: 1 });
//         }

//         updateCartCount();
//     });
// });

// // Actualiza el contador del carrito
// const updateCartCount = () => {
//     document.getElementById('cart-count').textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
// };

// // Eventos de botones
// document.getElementById('floating-cart').addEventListener('click', toggleCart);
// document.getElementById('close-cart').addEventListener('click', toggleCart);
// let cart = [];
// let totalPrice = 0;

// // Función para mostrar u ocultar el carrito con efecto de deslizamiento
// const toggleCart = () => {
//     const cartElement = document.getElementById('cart');

//     if (cartElement.style.display === 'block') {
//         // Efecto de cierre
//         cartElement.style.maxHeight = '0';
//         setTimeout(() => {
//             cartElement.style.display = 'none'; // Oculta después de la animación
//         }, 300); // Debe coincidir con la duración de la transición
//     } else {
//         // Actualizar la lista y abrir el carrito
//         updateCartItems();
//         cartElement.style.display = 'block'; // Muestra el carrito
//         setTimeout(() => {
//             cartElement.style.maxHeight = '500px'; // Ajustar a la altura deseada
//         }, 10); // Pequeña pausa para que se ejecute la animación
//     }
// };

// // Actualiza conteo de productos
// const updateCartCount = () => {
//     document.getElementById('cart-count').textContent = cart.length;
// };

// // Actualiza la lista de productos en el carrito
// const updateCartItems = () => {
//     const cartItems = document.getElementById('cart-items');
//     cartItems.innerHTML = ''; // Limpiar lista previa
//     totalPrice = 0; // Reiniciar total

//     // Iterar sobre productos en el carrito
//     cart.forEach(item => {
//         const li = document.createElement('li');
//         li.textContent = `${item.name} - $${item.price.toFixed(2)}`;
//         cartItems.appendChild(li);
//         totalPrice += item.price;
//     });

//     // Actualiza total
//     document.getElementById('total-price').textContent = totalPrice.toFixed(2);
// };

// // Evento de añadir al carrito
// document.querySelectorAll('.add-to-cart').forEach(button => {
//     button.addEventListener('click', () => {
//         const id = button.getAttribute('data-id');
//         const name = button.getAttribute('data-name');
//         const price = parseFloat(button.getAttribute('data-price'));
//         cart.push({id, name, price}); // Añadir producto al carrito
//         updateCartCount(); // Actualiza el contador
//     });
// });

// // Eventos de botones
// document.getElementById('floating-cart').addEventListener('click', toggleCart);
// document.getElementById('close-cart').addEventListener('click', () => {
//     const cartElement = document.getElementById('cart');
//     cartElement.style.maxHeight = '0'; // Efecto de cierre
//     setTimeout(() => {
//         cartElement.style.display = 'none'; // Oculta completamente
//     }, 300); // Debe coincidir con la duración de la transición
// });

</script>


  </body>
</html>